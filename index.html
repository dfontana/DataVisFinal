<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="javascript/tSNE.js " type="text/javascript"></script>
<script src="https://d3js.org/d3-hexbin.v0.2.min.js"></script>
<script src="javascript/hexBin.js " type="text/javascript"></script>

<head>
  <link rel="stylesheet" href="css/tSNE.css">
</head>

<body>
  <select id="decadeDropdown">
      <option value="1950" selected="selected">1950</option>
      <option value="1960">1960</option>
      <option value="1970">1970</option>
      <option value="1980">1980</option>
      <option value="1990">1990</option>
      <option value="2000">2000</option>
      <option value="2010">2010</option>
      <option value="2020">2020</option>
  </select>
  <svg id="mainVis" width=600 height=650></svg>
</body>

<script>
  let dispatch = d3.dispatch('decade-update', 'point-to')

  // Build the DOM
  let selected = () => document.getElementById("decadeDropdown").value;
  d3.json(`http://localhost:8000/tSNE/${selected()}/coords`, (err, data) => {
    if(err) { console.error(err); return }
    buildHex(d3.select('#mainVis'), data)
  })

  // Listen for changes to selection
  d3.select('#decadeDropdown')
    .on("change", function () {
      d3.json(`http://localhost:8000/tSNE/${selected()}/coords`, (err, data) => {
        if(err) return
        buildHex(d3.select('#mainVis'), data)
      })
    });
</script>
